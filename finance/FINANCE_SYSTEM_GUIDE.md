# ุฏููู ุงููุธุงู ุงููุงูู
# Finance System Guide

## ๐ฐ ุงููุธููุฉ ุงูุฃุณุงุณูุฉ

ุงููุธุงู ุงููุงูู ูุชุชุจุน:
1. **ุงูุญุณุงุจุงุช ุงูุฌุงุฑูุฉ** ููู ูุณุชุฎุฏู (ุตูุฏููุฉ/ููุฑุฏ)
2. **ุฌููุน ุงููุนุงููุงุช ุงููุงููุฉ** (ููุงุชูุฑุ ุฏูุนุงุชุ ูุฑุชุฌุนุงุช)
3. **ุงูุฃุฑุตุฏุฉ ูุงูุฏููู** ุจุดูู ุชููุงุฆู

---

## ๐ฆ ููููุงุช ุงููุธุงู

### 1๏ธโฃ ุงูุญุณุงุจ (Account)

**ููู ูุณุชุฎุฏู ุญุณุงุจ ูุญุชูู ุนูู:**

| ุงูุญูู | ุงููุตู | ูุซุงู |
|-------|-------|------|
| `balance` | ุงูุฑุตูุฏ ุงูุญุงูู | -15,000 |
| `credit_limit` | ุงูุญุฏ ุงูุงุฆุชูุงูู | 50,000 |
| `remaining_credit` | ุงููุชุจูู ูู ุงูุงุฆุชูุงู | 35,000 |

**ูุฑุงุกุฉ ุงูุฑุตูุฏ:**
- `balance > 0` โ โ ุนูุฏู ูููุณ (ุฑุตูุฏ ููุฌุจ)
- `balance = 0` โ ูุชุนุงุฏู
- `balance < 0` โ๏ธ โ **ูุฏููู** (ุฑุตูุฏ ุณุงูุจ)

**ูุซุงู:**
```json
{
  "user": "ุตูุฏููุฉ ุงูููุฑ",
  "balance": -15000.00,         // ูุฏูููุฉ 15,000 ุฌููู
  "credit_limit": 50000.00,     // ูุณููุญ ููุง ุชุฏูู ูุญุฏ 50,000
  "remaining_credit": 35000.00  // ูุณู ูููู ุชุฏูู 35,000 ุฒูุงุฏุฉ
}
```

---

### 2๏ธโฃ ุงููุนุงููุฉ ุงููุงููุฉ (AccountTransaction)

**ูู ุนูููุฉ ุชูุณุฌู ูุนุงููุฉ:**

```python
{
  "account": "ุญุณุงุจ ุตูุฏููุฉ ุงูููุฑ",
  "type": "PURCHASE_INVOICE",    # ููุน ุงููุนุงููุฉ
  "amount": 20000,               # ุงููุจูุบ
  "related_object": "ูุงุชูุฑุฉ ุดุฑุงุก ุฑูู 5",  # ูุฑุชุจุทุฉ ุจุฅูู
  "at": "2025-10-09"            # ุชุงุฑูุฎ ุงููุนุงููุฉ
}
```

---

### 3๏ธโฃ ุฏูุนุงุช ุงูุดุฑุงุก (PurchasePayment)

**ุชุณุฌูู ุฏูุนุงุช ููููุฑุฏูู:**

```json
{
  "user": "ุดุฑูุฉ ุงูุฃุฏููุฉ",
  "method": "cash",          // ูุงุดุ ุงูุณุชุงุจุงูุ ูุญูุธุฉุ ููุชุฌุงุช
  "amount": 10000,
  "at": "2025-10-10",
  "remarks": "ุฏูุนุฉ ุนูู ุงูุญุณุงุจ"
}
```

---

### 4๏ธโฃ ุฏูุนุงุช ุงูุจูุน (SalePayment)

**ุชุณุฌูู ุฏูุนุงุช ูู ุงูุตูุฏููุงุช:**

```json
{
  "user": "ุตูุฏููุฉ ุงูููุฑ",
  "method": "instapay",
  "amount": 5000,
  "at": "2025-10-10",
  "remarks": "ุชุญุตูู ุฌุฒุฆู"
}
```

---

## ๐ ููู ุชุชุฃุซุฑ ุงูุฃุฑุตุฏุฉุ

### ูู ูุฌูุฉ ูุธุฑ ุงูุดุฑูุฉ (ุฃูุช):

#### ุนูููุงุช ุชุฒูุฏ ุงูุฑุตูุฏ โ (Positive)

| ุงูุนูููุฉ | ุงููุจูุบ | ุงูุชุฃุซูุฑ ุนูู ุงูุฑุตูุฏ |
|---------|--------|---------------------|
| **Purchase Invoice** | 20,000 | `balance += 20,000` โ (ุชุฏูู ููููุฑุฏ) |
| **Sale Payment** | 5,000 | `balance += 5,000` โ (ุตูุฏููุฉ ุฏูุนุช ูู) |
| **Sale Return** | 2,000 | `balance += 2,000` โ (ุชุฑุฌุน ูููุณ ููุตูุฏููุฉ) |

#### ุนูููุงุช ุชููู ุงูุฑุตูุฏ โ (Negative)

| ุงูุนูููุฉ | ุงููุจูุบ | ุงูุชุฃุซูุฑ ุนูู ุงูุฑุตูุฏ |
|---------|--------|---------------------|
| **Sale Invoice** | 8,000 | `balance -= 8,000` โ (ุงูุตูุฏููุฉ ูุฏูููุฉ) |
| **Purchase Payment** | 10,000 | `balance -= 10,000` โ (ุฏูุนุช ููููุฑุฏ) |
| **Purchase Return** | 1,000 | `balance -= 1,000` โ (ุฑุฌุนุช ุจุถุงุนุฉ ููููุฑุฏ) |

---

## ๐ ูุซุงู ุนููู ุดุงูู: ุญุณุงุจ ุตูุฏููุฉ

### ุงูููู 1: ุจุฏุงูุฉ ุงูุดูุฑ
```
balance = 0
credit_limit = 50,000
```

### ุงูููู 2: ุงูุตูุฏููุฉ ุงุดุชุฑุช ููู ุจุถุงุนุฉ
```
ูุงุชูุฑุฉ ุจูุน: 20,000 ุฌููู
ูุนุงููุฉ: SALE_INVOICE (NEGATIVE)
balance = 0 - 20,000 = -20,000

๐ ุงูุตูุฏููุฉ ูุฏูููุฉ ูู 20,000 ุฌููู
```

### ุงูููู 3: ุงูุตูุฏููุฉ ุฏูุนุช ุฌุฒุก
```
ุฏูุนุฉ ุจูุน: 8,000 ุฌููู
ูุนุงููุฉ: SALE_PAYMENT (POSITIVE)
balance = -20,000 + 8,000 = -12,000

๐ ุงูุตูุฏููุฉ ูุณู ูุฏูููุฉ 12,000 ุฌููู
```

### ุงูููู 4: ุงูุตูุฏููุฉ ุงุดุชุฑุช ุชุงูู
```
ูุงุชูุฑุฉ ุจูุน: 5,000 ุฌููู
ูุนุงููุฉ: SALE_INVOICE (NEGATIVE)
balance = -12,000 - 5,000 = -17,000

๐ ุงูุตูุฏููุฉ ูุฏูููุฉ 17,000 ุฌููู
```

### ุงูููู 5: ุงูุตูุฏููุฉ ุฑุฌุนุช ุจุถุงุนุฉ ูุนูุจุฉ
```
ูุฑุชุฌุน ุจูุน: 2,000 ุฌููู
ูุนุงููุฉ: SALE_RETURN (POSITIVE)
balance = -17,000 + 2,000 = -15,000

๐ ุงูุตูุฏููุฉ ูุฏูููุฉ 15,000 ุฌููู
```

---

## ๐ฏ ุงูุญุฏ ุงูุงุฆุชูุงูู (Credit Limit)

```python
credit_limit = 50,000       # ุงูุญุฏ ุงูุฃูุตู ููุฏูู
balance = -15,000          # ุงูุฏูู ุงูุญุงูู
remaining_credit = 50,000 + (-15,000) = 35,000

๐ ุงูุตูุฏููุฉ ูุณู ูููู ุชุฏูู 35,000 ุฌููู ุฒูุงุฏุฉ
```

**ูู ุญุงููุช ุชุจูุน ุฃูุชุฑ ูู remaining_credit:**
```
ูู ุจุนุช ุจู 40,000 ุฌููู โ โ ูุฑูุถ!
ูุฃู: 40,000 > 35,000 (remaining_credit)
```

---

## ๐ต ุทุฑู ุงูุฏูุน (Payment Methods)

| ุงูุทุฑููุฉ | ุงูููุฏ |
|---------|-------|
| **ูุงุด** | `cash` |
| **ุงูุณุชุงุจุงู** | `instapay` |
| **ูุญูุธุฉ** | `wallet` |
| **ููุชุฌุงุช** | `product` (ููุงูุถุฉ) |

---

## ๐ ุชูุงุฑูุฑ ูุงููุฉ

### ุนุฑุถ ุญุณุงุจ ุตูุฏููุฉ

```http
GET /finance/accounts/{id}/
```

```json
{
  "id": 5,
  "balance": "-15000.00",
  "credit_limit": "50000.00",
  "remaining_credit": "35000.00",
  "transactions_url": "/finance/account-transactions/?account=5"
}
```

### ุนุฑุถ ูุนุงููุงุช ุงูุญุณุงุจ

```http
GET /finance/account-transactions/?account=5
```

```json
{
  "results": [
    {
      "id": 10,
      "type": "SALE_INVOICE",
      "amount": "5000.00",
      "at": "2025-10-10",
      "related_object": "Sale Invoice #15"
    },
    {
      "id": 9,
      "type": "SALE_PAYMENT",
      "amount": "8000.00",
      "at": "2025-10-09"
    }
  ]
}
```

---

## ๐ ุงูุฑุจุท ุงูุชููุงุฆู

### ูุน ููุงุชูุฑ ุงูุดุฑุงุก

```
ุฅุบูุงู ูุงุชูุฑุฉ ุดุฑุงุก (10,000 ุฌููู)
    โ
ูููุดุฃ AccountTransaction ุชููุงุฆูุงู
    type: PURCHASE_INVOICE
    amount: 10,000
    โ
balance ูุฒูุฏ (ุงูุฏูู ููููุฑุฏ ูุฒูุฏ)
```

### ูุน ููุงุชูุฑ ุงูุจูุน

```
ุฅุบูุงู ูุงุชูุฑุฉ ุจูุน (8,000 ุฌููู)
    โ
ูููุดุฃ AccountTransaction ุชููุงุฆูุงู
    type: SALE_INVOICE
    amount: 8,000
    โ
balance ููู (ุฏูู ุงูุตูุฏููุฉ ูุฒูุฏ)
```

### ูุน ุงูุฏูุนุงุช

```
ุชุณุฌูู ุฏูุนุฉ ูู ุตูุฏููุฉ (5,000 ุฌููู)
    โ
ูููุดุฃ SalePayment
    โ
ูููุดุฃ AccountTransaction ุชููุงุฆูุงู
    type: SALE_PAYMENT
    amount: 5,000
    โ
balance ูุฒูุฏ (ุฏูู ุงูุตูุฏููุฉ ููู)
```

---

## ๐ฏ ุงูุฎูุงุตุฉ

| ุงููููู | ุงููุธููุฉ |
|--------|---------|
| **Account** | ุญุณุงุจ ุฌุงุฑู ููู ูุณุชุฎุฏู (ุงูุฑุตูุฏ ูุงูุญุฏ ุงูุงุฆุชูุงูู) |
| **AccountTransaction** | ุณุฌู ูู ูุนุงููุฉ ูุงููุฉ |
| **PurchasePayment** | ุฏูุนุงุช ููููุฑุฏูู |
| **SalePayment** | ุฏูุนุงุช ูู ุงูุตูุฏููุงุช |

**ูู ุดูุก ุชููุงุฆู**:
- โ ุนูุฏ ุฅุบูุงู ูุงุชูุฑุฉ โ ุชูุณุฌู ูุนุงููุฉ
- โ ุนูุฏ ุชุณุฌูู ุฏูุนุฉ โ ุชูุญุฏุซ ุงูุฑุตูุฏ
- โ ุงูุญุณุงุจุงุช ุชููุดุฃ ุชููุงุฆูุงู

---

## ๐ฑ APIs ุงููุชุงุญุฉ

```
GET  /finance/accounts/                    ูุงุฆูุฉ ุงูุญุณุงุจุงุช
GET  /finance/accounts/{id}/               ุชูุงุตูู ุญุณุงุจ
PUT  /finance/accounts/{id}/change/        ุชุนุฏูู ุญุฏ ุงุฆุชูุงูู

GET  /finance/account-transactions/        ุงููุนุงููุงุช ุงููุงููุฉ
GET  /finance/purchase-payments/           ุฏูุนุงุช ุงูุดุฑุงุก
POST /finance/purchase-payments/create/    ุชุณุฌูู ุฏูุนุฉ ุดุฑุงุก
GET  /finance/sale-payments/               ุฏูุนุงุช ุงูุจูุน
POST /finance/sale-payments/create/        ุชุณุฌูู ุฏูุนุฉ ุจูุน
```

---

**ุจุจุณุงุทุฉ**: ูุธุงู ุงููุงููุฉ ูู **"ุฏูุชุฑ ุงูุญุณุงุจุงุช ุงูุฅููุชุฑููู"** ุงููู ุจูุชุชุจุน ูู ููุณ ุฏุฎู ุฃู ุฎุฑุฌ! ๐ฐโจ

**ุขุฎุฑ ุชุญุฏูุซ**: 2025-10-10

