# ุฏููู ุงูุฎุฒูุฉ ูุฑุฃุณ ุงููุงู
# Safe & Capital Guide

## ๐ฆ ูุธุงู ุงูุฎุฒูุฉ ูุงูุญุณุงุจุงุช ุงููุงููุฉ

ุงููุธุงู **ุฌุงูุฒ ููุนูู!** ููุญุณุจ ุชููุงุฆูุงู:

โ ุงููุงุด ูู ุงูุฎุฒูุฉ  
โ ุงููููุณ ุงููู ุนููู (ุฏููู ููููุฑุฏูู)  
โ ุงููููุณ ุงููู ููู (ุฏููู ุงูุตูุฏููุงุช)  
โ ูููุฉ ุงููุฎุฒูู  
โ ุฅุฌูุงูู ุฑุฃุณ ุงููุงู  

---

## ๐ฐ ุนุฑุถ ุฑุฃุณ ุงููุงู ุงูุฅุฌูุงูู

### ุงูู API

```http
GET http://129.212.140.152/finance/safe/
Authorization: Token your-token-here
```

### ุงูุงุณุชุฌุงุจุฉ

```json
{
  "safe_total_amount": "125000.00",      // โฌ๏ธ ุงููุงุด ูู ุงูุฎุฒูุฉ
  "credit_total_amount": "45000.00",     // โฌ๏ธ ุงููููุณ ุงููู ููู (ุฏููู ุตูุฏููุงุช)
  "debt_total_amount": "20000.00",       // โฌ๏ธ ุงููููุณ ุงููู ุนููู (ุฏููู ููุฑุฏูู)
  "inventory_total_amount": "85000.00",  // โฌ๏ธ ุชูููุฉ ุงููุฎุฒูู
  "total_amount": "235000.00"            // โฌ๏ธ ุฅุฌูุงูู ุฑุฃุณ ุงููุงู
}
```

### ุงููุนุงุฏูุฉ

```
ุฑุฃุณ ุงููุงู = ุงููุงุด + ุงูุฏููู ููู + ุงููุฎุฒูู - ุงูุฏููู ุนููู

total_amount = safe_total_amount + credit_total_amount + inventory_total_amount - debt_total_amount

235,000 = 125,000 + 45,000 + 85,000 - 20,000  โ
```

---

## ๐ต ุฅุฏุฎุงู ุงููุงุด ูู ุงูุฎุฒูุฉ

### 1๏ธโฃ ุฅูุฏุงุน (Deposit) - ุฅุถุงูุฉ ูููุณ ููุฎุฒูุฉ

```http
POST http://129.212.140.152/finance/safe-transactions/create/
{
  "type": "d",       // โฌ๏ธ d = Deposit (ุฅูุฏุงุน)
  "amount": 50000
}
```

**ูุง ูุญุฏุซ:**
```
ุงููุงุด ูู ุงูุฎุฒูุฉ += 50,000
โ safe_total_amount ูุฒูุฏ ุจู 50,000
โ total_amount ูุฒูุฏ ุจู 50,000
```

---

### 2๏ธโฃ ุณุญุจ (Withdrawal) - ุฃุฎุฐ ูููุณ ูู ุงูุฎุฒูุฉ

```http
POST http://129.212.140.152/finance/safe-transactions/create/
{
  "type": "w",       // โฌ๏ธ w = Withdrawal (ุณุญุจ)
  "amount": 10000
}
```

**ูุง ูุญุฏุซ:**
```
ุงููุงุด ูู ุงูุฎุฒูุฉ -= 10,000
โ safe_total_amount ููู ุจู 10,000
โ total_amount ููู ุจู 10,000
```

---

## ๐ ููู ูุญุณุจ ุงููุงุด ูู ุงูุฎุฒูุฉุ

### ุงูุตูุบุฉ

```
safe_total_amount = 
    (ุงูุฅูุฏุงุนุงุช - ุงูุณุญูุจุงุช)
    + ุฏูุนุงุช ุงูุจูุน (ูู ุงูุตูุฏููุงุช)
    - ุฏูุนุงุช ุงูุดุฑุงุก (ููููุฑุฏูู)
```

### ูุซุงู ุนููู

```
1. ุฅูุฏุงุน ุฃููู: +100,000
2. ุณุญุจ: -10,000
3. ุตูุฏููุฉ ุฏูุนุช ูู (Sale Payment): +8,000
4. ุฏูุนุช ููููุฑุฏ (Purchase Payment): -15,000

safe_total_amount = 100,000 - 10,000 + 8,000 - 15,000
                  = 83,000 ุฌููู  โ
```

---

## ๐ ุงูุญุณุงุจุงุช ุงูุชูุตูููุฉ

### 1๏ธโฃ ุงููุงุด ูู ุงูุฎุฒูุฉ

```
safe_total_amount = 125,000 ุฌููู

ูุดูู:
- ุงูุฅูุฏุงุนุงุช
- ุงูุฏูุนุงุช ูู ุงูุตูุฏููุงุช (ูุงุด)
- ูุงูุต: ุงูุฏูุนุงุช ููููุฑุฏูู (ูุงุด)
- ูุงูุต: ุงูุณุญูุจุงุช
```

---

### 2๏ธโฃ ุงููููุณ ุงููู ููู (ุฏููู ุงูุตูุฏููุงุช)

```
credit_total_amount = 45,000 ุฌููู

ูุนูู:
- ุงูุตูุฏููุงุช ูุฏูููุฉ ููู ุจู 45,000 ุฌููู
- ุฏู ุจุณุจุจ ููุงุชูุฑ ุงูุจูุน ุงููู ูุณู ูุง ุงุชุฏูุนุชุด
```

**ููู ูุญุณุจ:**
```sql
SELECT SUM(balance * -1)
FROM Account
WHERE balance < 0  -- ุงูุญุณุงุจุงุช ุงูุณุงูุจุฉ (ูุฏูููุฉ)
```

---

### 3๏ธโฃ ุงููููุณ ุงููู ุนููู (ุฏููู ููููุฑุฏูู)

```
debt_total_amount = 20,000 ุฌููู

ูุนูู:
- ุฃูุช ูุฏููู ููููุฑุฏูู ุจู 20,000 ุฌููู
- ุฏู ุจุณุจุจ ููุงุชูุฑ ุงูุดุฑุงุก ุงููู ูุณู ูุง ุงุชุฏูุนุชุด
```

**ููู ูุญุณุจ:**
```sql
SELECT SUM(balance)
FROM Account
WHERE balance >= 0  -- ุงูุญุณุงุจุงุช ุงูููุฌุจุฉ (ุฃูุช ูุฏููู)
```

---

### 4๏ธโฃ ูููุฉ ุงููุฎุฒูู

```
inventory_total_amount = 85,000 ุฌููู

ูุนูู:
- ุงูุจุถุงุนุฉ ูู ุงููุฎุฒู ุชูููุฉ ุดุฑุงุกูุง 85,000 ุฌููู
```

**ููู ูุญุณุจ:**
```sql
SELECT SUM(purchase_sub_total)
FROM InventoryItem
```

---

### 5๏ธโฃ ุฅุฌูุงูู ุฑุฃุณ ุงููุงู

```
total_amount = 235,000 ุฌููู

ุงููุนุงุฏูุฉ:
= ุงููุงุด + ุงูุฏููู ููู + ุงููุฎุฒูู - ุงูุฏููู ุนููู
= 125,000 + 45,000 + 85,000 - 20,000
= 235,000 ุฌููู  โ
```

---

## ๐ฏ ุงูุงุณุชุฎุฏุงู ุงูุนููู

### ุงูุณููุงุฑูู 1: ุฅูุฏุงุน ุฑุตูุฏ ุฃููู

```http
POST http://129.212.140.152/finance/safe-transactions/create/
{
  "type": "d",
  "amount": 100000
}

โ ุฑุตูุฏ ุงูุฎุฒูุฉ = 100,000 ุฌููู
```

---

### ุงูุณููุงุฑูู 2: ูุชุงุจุนุฉ ุฑุฃุณ ุงููุงู

```http
GET http://129.212.140.152/finance/safe/
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "safe_total_amount": "100000.00",    // ูุงุด ูู ุงูุฎุฒูุฉ
  "credit_total_amount": "0.00",       // ูุง ุฏููู ุนูู ุตูุฏููุงุช ุจุนุฏ
  "debt_total_amount": "0.00",         // ูุง ุฏููู ุนูู ููุฑุฏูู ุจุนุฏ
  "inventory_total_amount": "0.00",    // ุงููุฎุฒู ูุงุถู
  "total_amount": "100000.00"          // ุฑุฃุณ ุงููุงู = 100,000
}
```

---

### ุงูุณููุงุฑูู 3: ุจุนุฏ ุงูุดุฑุงุก ูุงูุจูุน

```
- ุงุดุชุฑูุช ุจุถุงุนุฉ ุจู 50,000 ูู ููุฑุฏ (ูุงุชูุฑุฉ ุดุฑุงุก)
- ุงูุจุถุงุนุฉ ุฑุงุญุช ูููุฎุฒู
- ุจุนุช ุจู 30,000 ูุตูุฏููุฉ (ูุงุชูุฑุฉ ุจูุน)
- ุงูุตูุฏููุฉ ุฏูุนุช 10,000 ูุงุด
- ุฏูุนุช ููููุฑุฏ 20,000 ูุงุด
```

```http
GET http://129.212.140.152/finance/safe/
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "safe_total_amount": "90000.00",     // 100k + 10k - 20k = 90k
  "credit_total_amount": "20000.00",   // ุงูุตูุฏููุฉ ูุฏูููุฉ 20k (30k - 10k)
  "debt_total_amount": "30000.00",     // ุฃูุช ูุฏููู ููููุฑุฏ 30k (50k - 20k)
  "inventory_total_amount": "20000.00",// ุจุงูู ุจุถุงุนุฉ ุจู 20k (50k - 30k)
  "total_amount": "100000.00"          // ุฑุฃุณ ุงููุงู ุซุงุจุช!
}
```

**ุงูุชุญููู:**
```
90,000 (ูุงุด) + 20,000 (ุฏููู ููู) + 20,000 (ูุฎุฒูู) - 30,000 (ุฏููู ุนููู)
= 100,000 ุฌููู  โ

ุฑุฃุณ ุงููุงู ุซุงุจุช ูุฃูู:
- ุจุนุช ุจู 30k ููู ุญุตูุช 10k ุจุณ (ุจุงูู 20k ุฏููู)
- ุงุดุชุฑูุช ุจู 50k ููู ุฏูุนุช 20k ุจุณ (ุจุงูู 30k ุฏููู)
- ุงูุจุถุงุนุฉ ูู ุงููุฎุฒู = 20k
```

---

## ๐ ูุนุงููุงุช ุงูุฎุฒูุฉ

### ุนุฑุถ ูุงุฆูุฉ ุงููุนุงููุงุช

```http
GET http://129.212.140.152/finance/safe-transactions/
```

```json
{
  "results": [
    {
      "id": 1,
      "type": "d",
      "type_label": "Deposit",
      "amount": "100000.00",
      "timestamp": "2025-10-01T10:00:00Z"
    },
    {
      "id": 2,
      "type": "w",
      "type_label": "Withdrawal",
      "amount": "5000.00",
      "timestamp": "2025-10-05T14:30:00Z"
    }
  ]
}
```

---

## ๐ ุงูุชุญุฏูุซ ุงูุชููุงุฆู

### ุงูุฎุฒูุฉ ุชุชุญุฏุซ ุชููุงุฆูุงู ุนูุฏ:

#### 1. ุชุณุฌูู ุฏูุนุฉ ูู ุตูุฏููุฉ (ูุงุด)

```http
POST /finance/sale-payments/create/
{
  "user": 5,
  "method": "cash",    // โฌ๏ธ ูุงุด
  "amount": 5000,
  "at": "2025-10-10"
}

โ safe_total_amount += 5,000  โ
```

#### 2. ุชุณุฌูู ุฏูุนุฉ ูููุฑุฏ (ูุงุด)

```http
POST /finance/purchase-payments/create/
{
  "user": 3,
  "method": "cash",    // โฌ๏ธ ูุงุด
  "amount": 10000,
  "at": "2025-10-10"
}

โ safe_total_amount -= 10,000  โ
```

**ููุงุญุธุฉ**: ุงูุฏูุนุงุช ุจู **instapay** ุฃู **wallet** ูุง ุชุคุซุฑ ุนูู ุงูุฎุฒูุฉ!

---

## ๐ ุชูุฑูุฑ ูุงูู ุดุงูู

### ูุซุงู ูุงูุนู

```http
GET http://129.212.140.152/finance/safe/
```

```json
{
  "safe_total_amount": "125000.00",      // ุงููุงุด ุงูููุฌูุฏ
  "credit_total_amount": "45000.00",     // ุฏููู ุงูุตูุฏููุงุช ููู
  "debt_total_amount": "20000.00",       // ุฏูููู ููููุฑุฏูู
  "inventory_total_amount": "85000.00",  // ุชูููุฉ ุงูุจุถุงุนุฉ
  "total_amount": "235000.00"            // ุฑุฃุณ ุงููุงู ุงูููู
}
```

**ุงูุชูุณูุฑ:**

| ุงูุจูุฏ | ุงููุจูุบ | ุงููุนูู |
|-------|--------|--------|
| ุงููุงุด | 125,000 | ููุฌูุฏ ูู ุงูุฎุฒูุฉ ุงูุขู |
| ุฏููู ููู | 45,000 | ุตูุฏููุงุช ูุฏูููุฉ ููู |
| ุฏููู ุนููู | 20,000 | ุฃูุช ูุฏููู ููููุฑุฏูู |
| ุงููุฎุฒูู | 85,000 | ุชูููุฉ ุงูุจุถุงุนุฉ ุงูููุฌูุฏุฉ |
| **ุฑุฃุณ ุงููุงู** | **235,000** | ุงููููุฉ ุงูุญููููุฉ ูุฃููุงูู |

**ุงูุญุณุงุจ:**
```
125,000 (ูุงุด) 
+ 45,000 (ูุชุญุตููู ูู ุงูุตูุฏููุงุช)
+ 85,000 (ุจุถุงุนุฉ ูููู ุชุจูุนูุง)
- 20,000 (ูุงุฒู ุชุฏูุนูู ููููุฑุฏูู)
โโโโโโโโโโโ
= 235,000 ุฌููู  โฌ๏ธ ุฑุฃุณ ุงููุงู ุงููุนูู
```

---

## ๐ง ุงูุนูููุงุช ุงููุชุงุญุฉ

### 1. ุฅูุฏุงุน ูู ุงูุฎุฒูุฉ

```http
POST http://129.212.140.152/finance/safe-transactions/create/
{
  "type": "d",
  "amount": 50000
}
```

**ูุซุงู:** ุฅูุฏุงุน ุฑุตูุฏ ุฃูููุ ุฃู ุฅุถุงูุฉ ูููุณ ูู ูุตุฏุฑ ุฎุงุฑุฌู

---

### 2. ุณุญุจ ูู ุงูุฎุฒูุฉ

```http
POST http://129.212.140.152/finance/safe-transactions/create/
{
  "type": "w",
  "amount": 10000
}
```

**ูุซุงู:** ูุตุฑููุงุชุ ุฑูุงุชุจุ ูููุงุช ุนุงูุฉ

---

### 3. ุชุณุฌูู ุฏูุนุฉ ูู ุตูุฏููุฉ

```http
POST http://129.212.140.152/finance/sale-payments/create/
{
  "user": 5,
  "method": "cash",
  "amount": 5000,
  "at": "2025-10-10",
  "remarks": "ุชุญุตูู ูู ุตูุฏููุฉ ุงูููุฑ"
}
```

**ุงูุชุฃุซูุฑ:**
- โ safe_total_amount += 5,000 (ุฅุฐุง ูุงุด)
- โ credit_total_amount -= 5,000 (ุฏูู ุงูุตูุฏููุฉ ููู)
- โ ุฑุตูุฏ ุงูุตูุฏููุฉ ูุชุญุฏุซ ุชููุงุฆูุงู

---

### 4. ุชุณุฌูู ุฏูุนุฉ ูููุฑุฏ

```http
POST http://129.212.140.152/finance/purchase-payments/create/
{
  "user": 3,
  "method": "cash",
  "amount": 10000,
  "at": "2025-10-10",
  "remarks": "ุณุฏุงุฏ ุฌุฒุฆู ูุดุฑูุฉ ุงูุฃุฏููุฉ"
}
```

**ุงูุชุฃุซูุฑ:**
- โ safe_total_amount -= 10,000 (ุฅุฐุง ูุงุด)
- โ debt_total_amount -= 10,000 (ุฏููู ููููุฑุฏ ููู)

---

## ๐ ูุซุงู ูุงูู ุฎุทูุฉ ุจุฎุทูุฉ

### ุงูููู 1: ุงูุจุฏุงูุฉ

```http
POST /finance/safe-transactions/create/
{
  "type": "d",
  "amount": 100000  // ุฅูุฏุงุน ุฃููู
}

GET /finance/safe/
โ {
  "safe_total_amount": "100000.00",
  "total_amount": "100000.00"
}
```

---

### ุงูููู 2: ุงุดุชุฑูุช ุจุถุงุนุฉ

```http
POST /invoices/purchase-invoices/create/
{
  "user": 3,  // ููุฑุฏ
  "items": [...]
}
โ ูุงุชูุฑุฉ ุดุฑุงุก ุจู 50,000 ุฌููู

GET /finance/safe/
โ {
  "safe_total_amount": "100000.00",    // ุงููุงุด ูุง ุงุชุบูุฑุด
  "debt_total_amount": "50000.00",     // ุฏููู ููููุฑุฏ
  "inventory_total_amount": "50000.00", // ุงูุจุถุงุนุฉ ูู ุงููุฎุฒู
  "total_amount": "100000.00"          // ุฑุฃุณ ุงููุงู ุซุงุจุช
}
```

---

### ุงูููู 3: ุฏูุนุช ููููุฑุฏ

```http
POST /finance/purchase-payments/create/
{
  "user": 3,
  "method": "cash",
  "amount": 20000
}

GET /finance/safe/
โ {
  "safe_total_amount": "80000.00",     // 100k - 20k
  "debt_total_amount": "30000.00",     // 50k - 20k
  "inventory_total_amount": "50000.00",
  "total_amount": "100000.00"          // ุซุงุจุช
}
```

---

### ุงูููู 4: ุจุนุช ููุตูุฏููุงุช

```http
POST /invoices/sale-invoices/create/
{
  "user": 5,  // ุตูุฏููุฉ
  "items": [...]  // ุจุถุงุนุฉ ุจู 30,000
}
โ ูุงุชูุฑุฉ ุจูุน ุจู 30,000 ุฌููู

GET /finance/safe/
โ {
  "safe_total_amount": "80000.00",
  "credit_total_amount": "30000.00",   // ุงูุตูุฏููุฉ ูุฏูููุฉ
  "debt_total_amount": "30000.00",
  "inventory_total_amount": "20000.00", // ุจุงูู ุจุถุงุนุฉ ุจู 20k
  "total_amount": "100000.00"          // ุซุงุจุช
}
```

---

### ุงูููู 5: ุงูุตูุฏููุฉ ุฏูุนุช

```http
POST /finance/sale-payments/create/
{
  "user": 5,
  "method": "cash",
  "amount": 10000
}

GET /finance/safe/
โ {
  "safe_total_amount": "90000.00",     // 80k + 10k
  "credit_total_amount": "20000.00",   // 30k - 10k
  "debt_total_amount": "30000.00",
  "inventory_total_amount": "20000.00",
  "total_amount": "100000.00"          // ุซุงุจุช!
}
```

---

## ๐ฏ ุงูุฎูุงุตุฉ

### ูุง ูู ููุฌูุฏ ููุนูู โ

| ุงูููุฒุฉ | API | ุงููุตู |
|--------|-----|-------|
| ุนุฑุถ ุฑุฃุณ ุงููุงู | `GET /finance/safe/` | ูู ุงูุญุณุงุจุงุช |
| ุฅูุฏุงุน | `POST /finance/safe-transactions/create/` | ุฃุถู ูุงุด |
| ุณุญุจ | `POST /finance/safe-transactions/create/` | ุงุณุญุจ ูุงุด |
| ุฏูุนุฉ ูู ุตูุฏููุฉ | `POST /finance/sale-payments/create/` | ุชุญุตูู |
| ุฏูุนุฉ ูููุฑุฏ | `POST /finance/purchase-payments/create/` | ุณุฏุงุฏ |

---

### ุงูุญุณุงุจุงุช ุงูุชููุงุฆูุฉ โ

```
โ ุงููุงุด = ุงูุฅูุฏุงุนุงุช - ุงูุณุญูุจุงุช + ุฏูุนุงุช ุงูุจูุน - ุฏูุนุงุช ุงูุดุฑุงุก
โ ุงูุฏููู ููู = ูุฌููุน ุฏููู ุงูุตูุฏููุงุช (balance < 0)
โ ุงูุฏููู ุนููู = ูุฌููุน ุฏูููู ููููุฑุฏูู (balance > 0)
โ ุงููุฎุฒูู = ุชูููุฉ ุดุฑุงุก ุงูุจุถุงุนุฉ ุงูููุฌูุฏุฉ
โ ุฑุฃุณ ุงููุงู = ูุงุด + ุฏููู ููู + ูุฎุฒูู - ุฏููู ุนููู
```

---

## ๐ฑ ูุซุงู ูุงุฌูุฉ ูุณุชุฎุฏู

### Dashboard

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ         ุฑุฃุณ ุงููุงู ุงูุฅุฌูุงูู         โ
โ          235,000 ุฌููู               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโ
โ ุงููุงุด        โ     125,000 ุฌููู     โ
โโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโค
โ ุฏููู ููู    โ      45,000 ุฌููู     โ
โโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโค
โ ุฏููู ุนููู   โ      20,000 ุฌููู     โ
โโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโค
โ ูููุฉ ุงููุฎุฒูู โ      85,000 ุฌููู     โ
โโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูุขู!

**ูู ุดูุก ููุฌูุฏ ููุนูู!** ููุท ุงุณุชุฎุฏู:

```http
GET http://129.212.140.152/finance/safe/
```

**ูุณุชุญุตู ุนูู ูู ุงููุนูููุงุช ุงููุทููุจุฉ!** ๐ฐโจ

---

**ุขุฎุฑ ุชุญุฏูุซ**: 2025-10-10  
**ุงูุฅุตุฏุงุฑ**: 1.0.0  
**ุงูุญุงูุฉ**: โ ุฌุงูุฒ ููุนูู

