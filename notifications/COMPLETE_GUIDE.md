# ğŸ”” Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø´Ø§Ù…Ù„ Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª

Ø¯Ù„ÙŠÙ„ Ù…ØªÙƒØ§Ù…Ù„ Ù„Ø¬Ù…ÙŠØ¹ Ù…ÙŠØ²Ø§Øª Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙÙŠ Pharmasky.

---

## ğŸ“‹ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

Ù†Ø¸Ø§Ù… Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…ØªÙƒØ§Ù…Ù„ ÙŠØºØ·ÙŠ **Ø¬Ù…ÙŠØ¹** Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ù‡Ù…Ø© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…:
- âœ… Ø§Ù„ÙÙˆØ§ØªÙŠØ± (Ø´Ø±Ø§Ø¡ ÙˆØ¨ÙŠØ¹)
- âœ… Ø§Ù„Ø¯ÙØ¹ (Ø´Ø±Ø§Ø¡ ÙˆØ¨ÙŠØ¹)
- âœ… Ø§Ù„Ù…Ø±ØªØ¬Ø¹Ø§Øª
- âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ§Øª
- âœ… Ø§Ù„Ø´ÙƒØ§ÙˆÙŠ
- âœ… Wishlist
- âœ… ØªØ°ÙƒÙŠØ±Ø§Øª Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„ØªØ­ØµÙŠÙ„ â­

**Ø¥Ø¬Ù…Ø§Ù„ÙŠ: 30+ Ù†ÙˆØ¹ Ø¥Ø´Ø¹Ø§Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠ! ğŸ‰**

---

## ğŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…

### ğŸ’Š Ù„Ù„ØµÙŠØ¯Ù„ÙŠØ© (Pharmacy)

| # | Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± | Ø§Ù„Ø­Ø¯Ø« | Ø§Ù„Ù…Ù„Ù |
|---|---------|-------|-------|
| 1 | ğŸ›’ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ | Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ | `invoices/signals.py` |
| 2 | ğŸ”” ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ | ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø© | `invoices/signals.py` |
| 3 | âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø¯ÙØ¹ØªÙƒ | Ø¯ÙØ¹Ø© Ø¬Ø¯ÙŠØ¯Ø© | `finance/signals.py` |
| 4 | â†©ï¸ Ø·Ù„Ø¨ Ø¥Ø±Ø¬Ø§Ø¹ | Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø±ØªØ¬Ø¹ | `invoices/signals.py` |
| 5 | âœ… ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© | Ù…ÙˆØ§ÙÙ‚Ø© Ù…Ø±ØªØ¬Ø¹ | `invoices/signals.py` |
| 6 | âŒ ØªÙ… Ø±ÙØ¶ Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹ | Ø±ÙØ¶ Ù…Ø±ØªØ¬Ø¹ | `invoices/signals.py` |
| 7 | âœ… ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹ | Ø§ÙƒØªÙ…Ø§Ù„ Ù…Ø±ØªØ¬Ø¹ | `invoices/signals.py` |
| 8 | ğŸ’° ØªÙ… Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø¨Ù„Øº | Ø§Ø³ØªØ±Ø¯Ø§Ø¯ | `finance/notifications.py` |
| 9 | âœ… ØªÙ… Ø­Ù„ Ø´ÙƒÙˆØ§Ùƒ | Ø­Ù„ Ø´ÙƒÙˆÙ‰ | `profiles/signals.py` |
| 10 | **âœ¨ Ù…Ù†ØªØ¬ Ù…ØªÙˆÙØ± Ù…Ù† Wishlist** | **ØªÙˆÙØ± Ù…Ù†ØªØ¬** | `offers/signals.py` â­ |
| 11 | **â° ØªØ°ÙƒÙŠØ±: Ù…ÙˆØ¹Ø¯ Ø§Ù„ØªØ­ØµÙŠÙ„** | **Ù‚Ø¨Ù„ Ø§Ù„Ù…ÙˆØ¹Ø¯** | `notifications/tasks.py` â­ |
| 12 | **âš ï¸ ØªÙ†Ø¨ÙŠÙ‡: Ø¯ÙØ¹Ø© Ù…ØªØ£Ø®Ø±Ø©** | **Ø¨Ø¹Ø¯ Ø§Ù„Ù…ÙˆØ¹Ø¯** | `notifications/tasks.py` â­ |

### ğŸª Ù„Ù„Ù…Ø®Ø²Ù† (Store)

| # | Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± | Ø§Ù„Ø­Ø¯Ø« | Ø§Ù„Ù…Ù„Ù |
|---|---------|-------|-------|
| 1 | ğŸ“¦ ÙØ§ØªÙˆØ±Ø© Ø´Ø±Ø§Ø¡ Ø¬Ø¯ÙŠØ¯Ø© | Ø¥Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø© | `invoices/signals.py` |
| 2 | ğŸ”” ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© | ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø© | `invoices/signals.py` |
| 3 | ğŸ’° Ø¯ÙØ¹Ø© Ø´Ø±Ø§Ø¡ | Ø¯ÙØ¹Ø© Ø¬Ø¯ÙŠØ¯Ø© | `finance/signals.py` |
| 4 | â†©ï¸ Ù…Ø±ØªØ¬Ø¹ Ø´Ø±Ø§Ø¡ | Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø±ØªØ¬Ø¹ | `invoices/signals.py` |
| 5 | ğŸ”” ØªØ­Ø¯ÙŠØ« Ù…Ø±ØªØ¬Ø¹ | ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø© | `invoices/signals.py` |

### ğŸ‘¨â€ğŸ’¼ Ù„Ù„Ù€ Admin/Manager

| # | Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± | Ø§Ù„Ø­Ø¯Ø« | Ø§Ù„Ù…Ù„Ù |
|---|---------|-------|-------|
| 1 | **ğŸª ØªØ³Ø¬ÙŠÙ„ ØµÙŠØ¯Ù„ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©** | **ØªØ³Ø¬ÙŠÙ„** | `accounts/signals.py` â­ |
| 2 | **ğŸ“¢ Ø´ÙƒÙˆÙ‰ Ø¬Ø¯ÙŠØ¯Ø©** | **Ø´ÙƒÙˆÙ‰** | `profiles/signals.py` â­ |
| 3 | ğŸ“¦ ÙØ§ØªÙˆØ±Ø© Ø´Ø±Ø§Ø¡ Ø¬Ø¯ÙŠØ¯Ø© | ÙØ§ØªÙˆØ±Ø© Ø´Ø±Ø§Ø¡ | `invoices/signals.py` |
| 4 | ğŸ›’ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ | Ø·Ù„Ø¨ ØµÙŠØ¯Ù„ÙŠØ© | `invoices/signals.py` |
| 5 | ğŸ’° Ø¯ÙØ¹Ø© Ø´Ø±Ø§Ø¡ | Ø¯ÙØ¹Ø© Ù…Ø®Ø²Ù† | `finance/signals.py` |
| 6 | âœ… Ø¯ÙØ¹Ø© Ø¨ÙŠØ¹ | Ø¯ÙØ¹Ø© ØµÙŠØ¯Ù„ÙŠØ© | `finance/signals.py` |
| 7 | â†©ï¸ Ù…Ø±ØªØ¬Ø¹ Ø´Ø±Ø§Ø¡ | Ù…Ø±ØªØ¬Ø¹ Ù…Ø®Ø²Ù† | `invoices/signals.py` |
| 8 | â†©ï¸ Ø·Ù„Ø¨ Ø¥Ø±Ø¬Ø§Ø¹ | Ù…Ø±ØªØ¬Ø¹ ØµÙŠØ¯Ù„ÙŠØ© | `invoices/signals.py` |

---

## ğŸ“ Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ù„ÙØ§Øª

```
notifications/
â”œâ”€â”€ models.py                           # Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
â”œâ”€â”€ serializers.py                      # DRF Serializers
â”œâ”€â”€ views.py                            # API Views
â”œâ”€â”€ urls.py                             # URL Configuration
â”œâ”€â”€ filters.py                          # Filters
â”œâ”€â”€ permissions.py                      # Permissions
â”œâ”€â”€ signals.py                          # Notification Signals
â”œâ”€â”€ tasks.py                            # Celery Tasks â­
â”œâ”€â”€ utils.py                            # Helper Functions
â”œâ”€â”€ admin.py                            # Django Admin
â”œâ”€â”€ tests.py                            # Tests
â”œâ”€â”€ README.md                           # Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
â”œâ”€â”€ USAGE_EXAMPLES.md                   # Ø£Ù…Ø«Ù„Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ±
â”œâ”€â”€ PAYMENT_RETURN_NOTIFICATIONS.md     # Ø§Ù„Ø¯ÙØ¹ ÙˆØ§Ù„Ù…Ø±ØªØ¬Ø¹Ø§Øª
â”œâ”€â”€ ADMIN_WISHLIST_NOTIFICATIONS.md     # Admin Ùˆ Wishlist
â””â”€â”€ PAYMENT_REMINDERS.md                # ØªØ°ÙƒÙŠØ±Ø§Øª Ø§Ù„ØªØ­ØµÙŠÙ„ â­

invoices/
â”œâ”€â”€ signals.py                          # Invoice Notifications â­
â””â”€â”€ notifications.py                    # Helper Functions

finance/
â”œâ”€â”€ signals.py                          # Payment Notifications â­
â””â”€â”€ notifications.py                    # Helper Functions

accounts/
â””â”€â”€ signals.py                          # Registration Notifications â­

profiles/
â”œâ”€â”€ signals.py                          # Complaint Notifications â­
â””â”€â”€ models.py                           # PaymentPeriod (updated) â­

offers/
â””â”€â”€ signals.py                          # Wishlist Notifications â­

project/
â””â”€â”€ celery.py                           # Celery Beat Schedule â­
```

---

## ğŸš€ Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒØ§Ù…Ù„Ø©

### 1ï¸âƒ£ **Commit & Push:**

```bash
git add .
git commit -m "Complete notification system: Admin, Wishlist, Payment Reminders"
git push origin main
```

### 2ï¸âƒ£ **Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ± - Pull & Migrate:**

```bash
cd /opt/pharmasky

# Pull Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª
git pull origin main

# Stop containers
docker-compose down

# Rebuild (Ù…Ù‡Ù…!)
docker-compose build --no-cache

# Start
docker-compose up -d

# Ø§Ù†ØªØ¸Ø±
sleep 15

# Migration Ù„Ù„Ù€ PaymentPeriod
docker exec -it pharmasky_web python manage.py makemigrations profiles
docker exec -it pharmasky_web python manage.py migrate profiles

# Restart
docker-compose restart web celery celery_beat
```

### 3ï¸âƒ£ **Ø¥Ù†Ø´Ø§Ø¡/ØªØ­Ø¯ÙŠØ« Payment Periods:**

```bash
docker exec -it pharmasky_web python manage.py shell
```

```python
from profiles.models import PaymentPeriod

periods_data = [
    {"name": "Ù†Ù‚Ø¯Ø§Ù‹", "period_in_days": 0, "addition_percentage": 0, "reminder_days_before": 0},
    {"name": "Ø£Ø³Ø¨ÙˆØ¹", "period_in_days": 7, "addition_percentage": 0.5, "reminder_days_before": 2},
    {"name": "15 ÙŠÙˆÙ…", "period_in_days": 15, "addition_percentage": 1.0, "reminder_days_before": 3},
    {"name": "Ø´Ù‡Ø±", "period_in_days": 30, "addition_percentage": 2.0, "reminder_days_before": 5},
    {"name": "45 ÙŠÙˆÙ…", "period_in_days": 45, "addition_percentage": 3.0, "reminder_days_before": 7},
    {"name": "Ø´Ù‡Ø±ÙŠÙ†", "period_in_days": 60, "addition_percentage": 4.0, "reminder_days_before": 10},
]

for data in periods_data:
    period, created = PaymentPeriod.objects.update_or_create(
        name=data["name"],
        defaults=data
    )
    print(f"{'âœ“ Ø¬Ø¯ÙŠØ¯' if created else 'â—‹ Ù…Ø­Ø¯Ø«'}: {period.name} (ØªØ°ÙƒÙŠØ± Ù‚Ø¨Ù„ {period.reminder_days_before} ÙŠÙˆÙ…)")

print(f"\nâœ… Ø¥Ø¬Ù…Ø§Ù„ÙŠ: {PaymentPeriod.objects.count()} ÙØªØ±Ø©")
```

### 4ï¸âƒ£ **Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ°ÙƒÙŠØ±Ø§Øª:**

```python
# Ù„Ø³Ø§ ÙÙŠ Shell
from notifications.tasks import send_payment_due_reminders

# ØªØ´ØºÙŠÙ„ ÙŠØ¯ÙˆÙŠØ§Ù‹
result = send_payment_due_reminders()
print(f"\nğŸ“Š Ø§Ù„Ù†ØªØ§Ø¦Ø¬:")
print(f"  âœ“ Ù†Ø¬Ø­Øª: {result['success']}")
print(f"  âœ“ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…ÙØ±Ø³Ù„Ø©: {result['notifications_sent']}")
print(f"  âœ“ ØµÙŠØ¯Ù„ÙŠØ§Øª ØªÙ… ÙØ­ØµÙ‡Ø§: {result['pharmacies_checked']}")
```

### 5ï¸âƒ£ **Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Celery Beat:**

```bash
# Ø®Ø±ÙˆØ¬ Ù…Ù† shell
exit

# Ø´ÙˆÙ logs
docker logs pharmasky_celery_beat --tail 50

# ÙŠØ¬Ø¨ Ø£Ù† ØªØ´ÙˆÙ:
# "Scheduler: DatabaseScheduler"
# "beat: Starting..."
```

---

## ğŸ¯ Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ø¹Ù…Ù„ÙŠ ÙƒØ§Ù…Ù„

### Ù…Ø«Ø§Ù„: ØµÙŠØ¯Ù„ÙŠØ© Ù…Ù† Ø§Ù„Ø£Ù„Ù Ù„Ù„ÙŠØ§Ø¡

```python
from django.utils import timezone
from datetime import timedelta

# 1. ØªØ³Ø¬ÙŠÙ„ ØµÙŠØ¯Ù„ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©
pharmacy = User.objects.create(
    username='+201234567890',
    name='ØµÙŠØ¯Ù„ÙŠØ© Ø§Ù„Ù†ÙˆØ±',
    role='PHARMACY',
    is_active=True
)
# âœ¨ Admin ÙŠØ³ØªÙ„Ù…: "ğŸª ØªØ³Ø¬ÙŠÙ„ ØµÙŠØ¯Ù„ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©"

# 2. Ø¶Ø¨Ø· Payment Period (Ø´Ù‡Ø± - ØªØ°ÙƒÙŠØ± Ù‚Ø¨Ù„ 5 Ø£ÙŠØ§Ù…)
profile = UserProfile.objects.create(user=pharmacy)
period = PaymentPeriod.objects.get(name="Ø´Ù‡Ø±")
profile.payment_period = period
profile.save()

# 3. Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ© ØªØ¹Ù…Ù„ Ø·Ù„Ø¨
invoice = SaleInvoice.objects.create(
    user=pharmacy,
    total_price=15000.00,
    status='PLACED'
)
# âœ¨ Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ© ØªØ³ØªÙ„Ù…: "ğŸ›’ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡"
# âœ¨ Admin ÙŠØ³ØªÙ„Ù…: "ğŸ›’ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯"

profile.latest_invoice_date = timezone.now()
profile.save()

# 4. Ø§Ù„Ø·Ù„Ø¨ ÙŠÙˆØµÙ„
invoice.status = 'DELIVERED'
invoice.save()
# âœ¨ "ğŸ”” ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ - ØªÙ… ØªÙˆØµÙŠÙ„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­ âœ…"

# 5. Ø¨Ø¹Ø¯ 25 ÙŠÙˆÙ… - ØªØ°ÙƒÙŠØ± (Ù…ÙˆØ¹Ø¯ Ø§Ù„ØªØ­ØµÙŠÙ„ Ø¨Ø¹Ø¯ 5 Ø£ÙŠØ§Ù…)
# Task ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙŠØ´ØªØºÙ„:
# âœ¨ "â° ØªØ°ÙƒÙŠØ±: Ù…ÙˆØ¹Ø¯ Ø§Ù„ØªØ­ØµÙŠÙ„ Ù‚Ø±ÙŠØ¨"
# "Ù„Ø¯ÙŠÙƒ Ø±ØµÙŠØ¯ Ù…Ø³ØªØ­Ù‚ Ø¨Ù‚ÙŠÙ…Ø© 15000 Ø¬Ù†ÙŠÙ‡. Ù…ÙˆØ¹Ø¯ Ø§Ù„ØªØ­ØµÙŠÙ„ Ø¨Ø¹Ø¯ 5 Ø£ÙŠØ§Ù…"

# 6. Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ© ØªØ¯ÙØ¹
payment = SalePayment.objects.create(
    user=pharmacy,
    method='BANK',
    amount=15000.00,
    at=timezone.now()
)
# âœ¨ "âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø¯ÙØ¹ØªÙƒ"

# 7. Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ© ØªØ¶ÙŠÙ Ù…Ù†ØªØ¬ Ù„Ù„Ù€ wishlist
product = Product.objects.first()
PharmacyProductWishList.objects.create(
    pharmacy=pharmacy,
    product=product
)

# 8. Ù…Ø®Ø²Ù† ÙŠØ¶ÙŠÙ Ø¹Ø±Ø¶ Ù„Ù„Ù…Ù†ØªØ¬
offer = Offer.objects.create(
    product=product,
    user=store,
    selling_price=80.00,
    selling_discount_percentage=20.00,
    remaining_amount=100
)
# âœ¨ "âœ¨ Ù…Ù†ØªØ¬ Ù…ØªÙˆÙØ± Ù…Ù† Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±ØºØ¨Ø§Øª!"

# 9. Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ© ØªÙ‚Ø¯Ù… Ø´ÙƒÙˆÙ‰
complaint = Complaint.objects.create(
    user=pharmacy,
    subject="Ø§Ø³ØªÙØ³Ø§Ø±",
    body="Ù‡Ù„ ÙŠÙˆØ¬Ø¯ Ø®ØµÙ… Ø¥Ø¶Ø§ÙÙŠØŸ"
)
# âœ¨ Admin ÙŠØ³ØªÙ„Ù…: "ğŸ“¢ Ø´ÙƒÙˆÙ‰ Ø¬Ø¯ÙŠØ¯Ø©"

# 10. Admin ÙŠØ­Ù„ Ø§Ù„Ø´ÙƒÙˆÙ‰
complaint.mark_as_solved = True
complaint.save()
# âœ¨ Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ© ØªØ³ØªÙ„Ù…: "âœ… ØªÙ… Ø­Ù„ Ø´ÙƒÙˆØ§Ùƒ"
```

**ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ: ØªÙ… Ø¥Ø±Ø³Ø§Ù„ 12 Ø¥Ø´Ø¹Ø§Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹! ğŸš€**

---

## ğŸ“š Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ù…ØªØ§Ø­

| Ø§Ù„Ù…Ù„Ù | Ø§Ù„Ù…Ø­ØªÙˆÙ‰ | Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© |
|------|---------|----------|
| `README.md` | ØªÙˆØ«ÙŠÙ‚ Ø´Ø§Ù…Ù„ Ù„Ù„Ù†Ø¸Ø§Ù… | â­â­â­ |
| `COMPLETE_GUIDE.md` | Ù‡Ø°Ø§ Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø´Ø§Ù…Ù„ | â­â­â­ |
| `USAGE_EXAMPLES.md` | Ø£Ù…Ø«Ù„Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ± | â­â­ |
| `PAYMENT_RETURN_NOTIFICATIONS.md` | Ø§Ù„Ø¯ÙØ¹ ÙˆØ§Ù„Ù…Ø±ØªØ¬Ø¹Ø§Øª | â­â­ |
| `ADMIN_WISHLIST_NOTIFICATIONS.md` | Admin Ùˆ Wishlist | â­â­ |
| `PAYMENT_REMINDERS.md` | ØªØ°ÙƒÙŠØ±Ø§Øª Ø§Ù„ØªØ­ØµÙŠÙ„ | â­â­â­ |

---

## ğŸ”§ Files Modified/Created

### Ù…Ù„ÙØ§Øª Notifications App:
- âœ… `serializers.py` - 8 serializers
- âœ… `views.py` - 23 API views
- âœ… `urls.py` - 20+ endpoints
- âœ… `filters.py` - 3 filter classes
- âœ… `permissions.py` - 5 permission classes
- âœ… `tasks.py` - 7 Celery tasks â­
- âœ… `tests.py` - 40+ test cases

### Ù…Ù„ÙØ§Øª Signals (Ø¬Ø¯ÙŠØ¯Ø©):
- âœ… `invoices/signals.py` - ÙÙˆØ§ØªÙŠØ± ÙˆÙ…Ø±ØªØ¬Ø¹Ø§Øª
- âœ… `finance/signals.py` - Ø¯ÙØ¹
- âœ… `accounts/signals.py` - ØªØ³Ø¬ÙŠÙ„ ØµÙŠØ¯Ù„ÙŠØ§Øª
- âœ… `profiles/signals.py` - Ø´ÙƒØ§ÙˆÙŠ
- âœ… `offers/signals.py` - wishlist

### Ù…Ù„ÙØ§Øª Helper (Ø¬Ø¯ÙŠØ¯Ø©):
- âœ… `invoices/notifications.py`
- âœ… `finance/notifications.py`

### Ù…Ù„ÙØ§Øª Ù…Ø­Ø¯Ø«Ø©:
- âœ… `profiles/models.py` - Ø­Ù‚Ù„ `reminder_days_before` â­
- âœ… `profiles/serializers.py` - Ø­Ù‚Ù„ Ø¬Ø¯ÙŠØ¯
- âœ… `profiles/admin.py` - Ø¹Ø±Ø¶ Ø§Ù„Ø­Ù‚Ù„
- âœ… `project/celery.py` - Celery Beat Schedule â­
- âœ… `project/urls.py` - Ø±Ø¨Ø· URLs
- âœ… All `apps.py` files - Ø±Ø¨Ø· Signals

---

## â° Celery Beat Schedule

### Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…Ø¬Ø¯ÙˆÙ„Ø©:

```python
# ÙÙŠ project/celery.py

app.conf.beat_schedule = {
    # 1. ØªØ°ÙƒÙŠØ±Ø§Øª Ø§Ù„Ø¯ÙØ¹ - ÙŠÙˆÙ…ÙŠØ§Ù‹ Ø§Ù„Ø³Ø§Ø¹Ø© 9 ØµØ¨Ø§Ø­Ø§Ù‹
    'send-payment-due-reminders': {
        'task': 'notifications.tasks.send_payment_due_reminders',
        'schedule': crontab(hour=9, minute=0),
    },
    
    # 2. Ø­Ø°Ù Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© - Ø£Ø³Ø¨ÙˆØ¹ÙŠØ§Ù‹
    'delete-old-notifications': {
        'task': 'notifications.tasks.delete_old_read_notifications',
        'schedule': crontab(hour=2, minute=0, day_of_week=0),
        'args': (30,)
    },
}
```

---

## ğŸ¯ ÙƒÙŠÙÙŠØ© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

### ØªÙ„Ù‚Ø§Ø¦ÙŠ (Recommended):

Ù…Ø¹Ø¸Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØªÙØ±Ø³Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹! ÙÙ‚Ø·:

```python
# Ø§Ø¹Ù…Ù„ ÙØ§ØªÙˆØ±Ø© Ø¹Ø§Ø¯ÙŠ
invoice = SaleInvoice.objects.create(...)
# âœ¨ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± ÙŠÙØ±Ø³Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹

# Ø¯ÙØ¹Ø©
payment = SalePayment.objects.create(...)
# âœ¨ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± ÙŠÙØ±Ø³Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹

# Ù…Ø±ØªØ¬Ø¹
return_invoice = SaleReturnInvoice.objects.create(...)
# âœ¨ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± ÙŠÙØ±Ø³Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
```

### Manual (Ù„Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø®Ø§ØµØ©):

```python
from notifications.models import Notification

# Ø¥Ø´Ø¹Ø§Ø± Ù…Ø®ØµØµ
Notification.objects.create(
    user=pharmacy,
    title="Ø¥Ø´Ø¹Ø§Ø± Ø®Ø§Øµ",
    message="Ù…Ø­ØªÙˆÙ‰ Ù…Ø®ØµØµ",
    extra={"custom": "data"}
)
```

### Celery Tasks (Ù„Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ):

```python
from notifications.tasks import send_bulk_notifications

# Ø¥Ø±Ø³Ø§Ù„ Ù„Ø¹Ø¯Ø© Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
send_bulk_notifications.delay(
    user_ids=[1, 2, 3, 4, 5],
    title="Ø¥Ø´Ø¹Ø§Ø± Ø¬Ù…Ø§Ø¹ÙŠ",
    message="Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±"
)
```

---

## ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª

### Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹:

```bash
curl http://localhost:8000/notifications/notifications/stats/ \
     -H "Authorization: Token YOUR_TOKEN"
```

### ÙÙ„ØªØ±Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª:

```bash
# Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Wishlist ÙÙ‚Ø·
curl http://localhost:8000/notifications/notifications/?extra__type=wishlist_product_available

# ØªØ°ÙƒÙŠØ±Ø§Øª Ø§Ù„Ø¯ÙØ¹ ÙÙ‚Ø·
curl http://localhost:8000/notifications/notifications/?extra__type=payment_due_reminder

# Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØºÙŠØ± Ø§Ù„Ù…Ù‚Ø±ÙˆØ¡Ø©
curl http://localhost:8000/notifications/notifications/unread/
```

---

## ğŸ” Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ù…ÙÙŠØ¯Ø©

### Django Shell:

```python
from notifications.models import Notification
from django.db.models import Count

# Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
stats = Notification.objects.values('extra__type').annotate(
    count=Count('id')
).order_by('-count')

for stat in stats:
    print(f"{stat['extra__type']}: {stat['count']}")

# Ø£ÙƒØ«Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ø³ØªÙ‚Ø¨Ø§Ù„Ø§Ù‹ Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
top_users = Notification.objects.values(
    'user__name'
).annotate(
    count=Count('id')
).order_by('-count')[:10]

for user in top_users:
    print(f"{user['user__name']}: {user['count']} Ø¥Ø´Ø¹Ø§Ø±")
```

---

## âœ… Checklist Ø§Ù„ØªØ·Ø¨ÙŠÙ‚

- [ ] Commit & Push Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª
- [ ] Pull Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±
- [ ] Rebuild containers
- [ ] Migrate profiles app
- [ ] Ø¥Ù†Ø´Ø§Ø¡/ØªØ­Ø¯ÙŠØ« Payment Periods
- [ ] Ø§Ø®ØªØ¨Ø§Ø± `send_payment_due_reminders` ÙŠØ¯ÙˆÙŠØ§Ù‹
- [ ] Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Celery Beat Ø´ØºØ§Ù„
- [ ] Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø© â†’ Ø¥Ø´Ø¹Ø§Ø±
- [ ] Ø§Ø®ØªØ¨Ø§Ø± Wishlist â†’ Ø¥Ø´Ø¹Ø§Ø±
- [ ] Ø§Ø®ØªØ¨Ø§Ø± Ø´ÙƒÙˆÙ‰ â†’ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ù€ Admin

---

## ğŸŠ Ø§Ù„Ø®Ù„Ø§ØµØ© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©

### âœ… Ù…Ø§ ØªÙ… Ø¥Ù†Ø¬Ø§Ø²Ù‡:

| Ø§Ù„Ù…ÙŠØ²Ø© | Ø§Ù„Ø­Ø§Ù„Ø© | Ø§Ù„Ù…Ù„ÙØ§Øª |
|--------|--------|---------|
| Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ | âœ… | 8 Ù…Ù„ÙØ§Øª |
| Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ÙÙˆØ§ØªÙŠØ± | âœ… | invoices/signals.py |
| Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø¯ÙØ¹ | âœ… | finance/signals.py |
| Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø±ØªØ¬Ø¹Ø§Øª | âœ… | invoices/signals.py |
| Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Admin | âœ… | 4 Ù…Ù„ÙØ§Øª signals |
| Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Wishlist | âœ… | offers/signals.py |
| **ØªØ°ÙƒÙŠØ±Ø§Øª Ø§Ù„ØªØ­ØµÙŠÙ„** | **âœ…** | **tasks.py + celery.py** â­ |
| Celery Beat Schedule | âœ… | project/celery.py |
| Tests Ø´Ø§Ù…Ù„Ø© | âœ… | tests.py (40+ tests) |
| ØªÙˆØ«ÙŠÙ‚ ÙƒØ§Ù…Ù„ | âœ… | 6 Ù…Ù„ÙØ§Øª MD |

### ğŸ“ˆ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª:

- ğŸ¯ **30+ Ù†ÙˆØ¹ Ø¥Ø´Ø¹Ø§Ø±** ØªÙ„Ù‚Ø§Ø¦ÙŠ
- ğŸ“ **20+ Ù…Ù„Ù** ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡Ø§/ØªØ­Ø¯ÙŠØ«Ù‡Ø§
- ğŸ”” **7 Celery Tasks** Ù„Ù„Ø¹Ù…Ù„ÙŠØ§Øª ØºÙŠØ± Ø§Ù„Ù…ØªØ²Ø§Ù…Ù†Ø©
- â° **2 Scheduled Tasks** ÙÙŠ Celery Beat
- ğŸ§ª **40+ Test Cases**
- ğŸ“š **6 Ù…Ù„ÙØ§Øª ØªÙˆØ«ÙŠÙ‚** Ø´Ø§Ù…Ù„Ø©
- ğŸŒ **20+ API Endpoints**

**Ù†Ø¸Ø§Ù… Ø¥Ø´Ø¹Ø§Ø±Ø§Øª enterprise-grade ÙƒØ§Ù…Ù„! ğŸ‰ğŸš€**

---

## ğŸ†˜ Ø§Ù„Ø¯Ø¹Ù…

Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø£Ùˆ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª:
1. Ø±Ø§Ø¬Ø¹ Ù…Ù„ÙØ§Øª Ø§Ù„ØªÙˆØ«ÙŠÙ‚ ÙÙŠ `/notifications/`
2. Ø´ÙˆÙ Ø§Ù„Ø£Ù…Ø«Ù„Ø© ÙÙŠ `USAGE_EXAMPLES.md`
3. Ø§Ø®ØªØ¨Ø± Ù…Ù† Django Shell
4. ØªØ­Ù‚Ù‚ Ù…Ù† Logs

**Built with â¤ï¸ by Pharmasky Team**

